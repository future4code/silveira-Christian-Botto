<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="index.css">

    <div class="head-pages">
        <a href="http://127.0.0.1:5500/index.html">Home</a> &nbsp&nbsp&nbsp&nbsp
        <a href="http://127.0.0.1:5500/contact.html">Contact Me</a> &nbsp&nbsp&nbsp&nbsp
        <a href="http://127.0.0.1:5500/blackjack.html">Blackjack</a> &nbsp&nbsp&nbsp&nbsp
        <a href="http://127.0.0.1:5500/guess.html">Guessing Game</a> &nbsp&nbsp&nbsp&nbsp
    </div>
</head>

<div class="stripe-one">
    <div class="title">Blackjack</div> 
    <br>
This is a project written on javascript.
If you want to know the rules of the game, please <a href="http://www.hitorstand.net/strategy.php" target="_blank">click here</a>.

<br> <br> <br>
Now that you know the rules, let's play! <br>
Click on the buttom below to start the match:

<button onclick="blackJ()">Blackjack!</button>

<p id="demo"></p>

<script type="application/javascript" src="blackfunctions.js"></script>
<script>
    console.log("Boas vindas ao jogo de Blackjack!")
    // Começo do jogo
    function BlackJ() {
    if(confirm("Quer iniciar uma nova rodada?")) {
        console.log("Certo. Vamos começar uma nova rodada!")
    
       // Retirada de cartas do usuário e checar se vem dois A's
       const cardUser1 = comprarCarta();
       const cardUser2 = comprarCarta();
       if(cardUser1.texto.includes("A") && cardUser2.texto.includes("A")) {
          while (cardUser1.texto.includes("A") && cardUser2.texto.includes("A")){
             const cardUser1 = comprarCarta();
       const cardUser2 = comprarCarta();
             }
        }
       let cardUserArray = [cardUser1, cardUser2] // Salva aos objetos em uma array
    
       // Retirada de cartas do computador e checar se vem dois A's
       const cardComp1 = comprarCarta();
       const cardComp2 = comprarCarta();
       if(cardComp1.texto.includes("A") && cardComp2.texto.includes("A")) {
          while (cardComp1.texto.includes("A") && cardComp2.texto.includes("A")){
             const cardComp1 = comprarCarta();
       let cardComp2 = comprarCarta();
             }
       }
    
       // Confirmação de compra do usuário
       // Criar uma nova array apenas com as strings dos textos usando map:
       var textCardsUser = cardUserArray.map((item, index, array) => { 
          return item.texto
       })
    
       var sumArrayUser = cardUser1.valor + cardUser2.valor // Inicia o valor total caso não ente no loop
       var sumArrayComp = cardComp1.valor + cardComp2.valor  // Ou seja, caso o usuário aperte cancel na primeira rodada
    
       while (confirm(`Suas cartas são ${textCardsUser}. A carta revelada do computador é ${cardComp1.texto} `)) {
          const cardUserAux = comprarCarta();
          cardUserArray = cardUserArray.concat(cardUserAux) // Concatena as arrays
             // Criar uma nova array apenas com as strings dos textos usando map (de novo):
             var textCardsUser = cardUserArray.map((item, index, array) => {
                return item.texto
          }) 
          // Calcula somatório das cartas      
          sumArrayUser = sumArrayUser + cardUserAux.valor 
         // Vamos comparar se é menor ou igual a 21
          if (sumArrayUser >21) {
             break
          }
       } 
    
       // Vez do computador
       let cardCompArray = [cardComp1, cardComp2] // Salva aos objetos em uma array
    
       // Confirmação de compra do computador
       // Criar uma nova array apenas com as strings dos textos usando map:
       var textCardsComp = cardCompArray.map((item, index, array) => { 
          return item.texto
       })
       while (sumArrayComp < sumArrayUser) { // Vamos comparar se é maior ou igual ao valor do usuário (o contrário de >= é <)
          const cardCompAux = comprarCarta();
          cardCompArray = cardCompArray.concat(cardCompAux) // Concatena as arrays
             // Criar uma nova array apenas com as strings dos textos usando map (de novo):
             var textCardsComp = cardCompArray.map((item, index, array) => {
                return item.texto
          }) 
          // Calcula somatório das cartas
          // Criar uma nova array apenas com os valores das cartas:
             sumArrayComp = sumArrayComp + cardCompAux.valor
       } 
    
       const cardUserTotal = sumArrayUser // Salvando a mesma variável apenas por clareza
       const cardCompTotal = sumArrayComp // Salvando a mesma variável apenas por clareza
    
       console.log(`Usuário - cartas:  ${textCardsUser} - pontuação: ${cardUserTotal}`)  
       console.log(`Computador - cartas:  ${textCardsComp}- pontuação: ${cardCompTotal}`)     
    
       if (cardUserTotal>21){
          console.log(`O computador ganhou!`)
       } else if(cardUserTotal<cardCompTotal && cardUserTotal<=21 && cardCompTotal<=21) {
             console.log(`O computador ganhou!`)  
       } else if(cardUserTotal<cardCompTotal && cardUserTotal<=21 && cardCompTotal>21) {
             console.log(`O usuário ganhou!`)       
       } else if(cardUserTotal>cardCompTotal && cardUserTotal<=21) {
          console.log(`O usuário ganhou!`)  
       } else if(cardUserTotal<=21 && cardCompTotal>21) {
          console.log(`O usuário ganhou!`) 
       } else if(cardUserTotal===cardCompTotal) {
          console.log(`Empate!`)
       }else {
        console.log("O jogo acabou. Até a próxima!")
     }
    }
}
</script>
</div>


  




<footer>
    You can find my social media here:
    &nbsp&nbsp
    <a href="https://github.com/future4code/silveira-Christian-Botto" target="_blank"><img src="/img/github.png" alt="my-github" style="width:20px;height:20px;"></a>
    &nbsp&nbsp
    <a href="https://www.instagram.com/chriss3008/?hl=en" target="_blank"><img src="/img/insta.png" alt="my-github" style="width:20px;height:20px;"></a>
    &nbsp&nbsp
    <a href="https://www.linkedin.com/in/christian-cardeal-322370175/" target="_blank"><img src="/img/linkedin.png" alt="my-github" style="width:20px;height:20px;"></a>
</footer>
</html>
